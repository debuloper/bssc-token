<!doctype html>
<html lang="en" class="h-full bg-[#0b0b10] text-zinc-100">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>BSSC Token Deployer (EVM)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --stroke: rgba(255,255,255,.06); }
    .shell{ max-width:800px; margin:0 auto; padding:32px 16px }
    .card{ background:#10111a; border-radius:16px; padding:24px; border:1px solid var(--stroke); box-shadow:0 10px 24px rgba(0,0,0,.4); }
    .field{ width:100%; background:#0f1117; border:1px solid var(--stroke); border-radius:12px; padding:10px 14px; color:#e5e7eb; outline:none; }
    .field::placeholder{ color:#6b7280 }
    .primary{ background-image:linear-gradient(135deg,#6d28d9,#4f46e5); color:white; font-weight:700; border-radius:12px; padding:10px 16px; box-shadow:0 8px 24px rgba(109,40,217,.35); transition:.12s; }
    .primary:hover{ filter:brightness(1.1); transform:translateY(-1px); }
    .log-row{ padding:8px 12px; border-bottom:1px solid rgba(255,255,255,.05); font-family:ui-monospace; font-size:14px; }
    .tag{ padding:2px 8px; border-radius:8px; font-size:12px; font-weight:700; }
    .tag.ok{ background:#064e3b; color:#6ee7b7 }
    .tag.err{ background:#5f1b1b; color:#fecaca }
  </style>
</head>
<body>
<main class="shell space-y-6">
  <h1 class="text-2xl font-bold tracking-tight">BSSC Token Deployer (EVM)</h1>

  <section class="card space-y-3">
    <div class="grid md:grid-cols-2 gap-3">
      <input id="tokenName" class="field" placeholder="Token Name (e.g. Gnocchi Coin)"/>
      <input id="tokenSymbol" class="field" placeholder="Symbol (e.g. GNC)"/>
    </div>
    <button id="deploy" class="primary w-full">Deploy Token</button>
    <div id="status" class="mt-3 text-sm text-zinc-400"></div>
  </section>

  <section class="card space-y-1">
    <div class="text-xs uppercase text-zinc-400">Log</div>
    <div id="logs" class="text-sm space-y-1"></div>
  </section>
</main>

<script type="module">
import { ethers } from "https://cdn.jsdelivr.net/npm/ethers@6.13.2/dist/ethers.min.js";

const RPC_URL = "https://bssc-rpc.bssc.live";
const CHAIN_ID = 16979;

// Your ABI
const ABI = [
  {
    "inputs": [
      {"internalType": "string","name": "name_","type": "string"},
      {"internalType": "string","name": "symbol_","type": "string"},
      {"internalType": "uint8","name": "decimals_","type": "uint8"},
      {"internalType": "uint256","name": "initialSupplyHuman_","type": "uint256"}
    ],
    "stateMutability": "nonpayable","type": "constructor"
  },
  {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},
  {"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},
  {"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}
];

// Your bytecode (only the "object" value from Remix)
const BYTECODE = "0x608060405234801562000010575f80fd5b50604051620016e3380380620016e3833981810160405281019062000036919062000345565b835f908162000046919062000620565b50826001908162000058919062000620565b508160025f6101000a81548160ff021916908360ff1602179055505f82600a62000083919062000881565b82620000909190620008d1565b9050806003819055508060045f3373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055503373ffffffffffffffffffffffffffffffffffffffff165f73ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516200013a91906200092c565b60405180910390a3505050505062000947565b...736f6c63430008140033";

const provider = new ethers.JsonRpcProvider(RPC_URL);
let wallet;

// Use stored or random wallet
if (localStorage.getItem("privkey")) {
  wallet = new ethers.Wallet(localStorage.getItem("privkey"), provider);
} else {
  wallet = ethers.Wallet.createRandom().connect(provider);
  localStorage.setItem("privkey", wallet.privateKey);
}

const log = (msg, type="")=>{
  const el = document.createElement("div");
  el.className="log-row";
  el.innerHTML=`<span class="tag ${type==="ok"?"ok":type==="err"?"err":""}">${type?type.toUpperCase():"INFO"}</span> ${msg}`;
  document.getElementById("logs").prepend(el);
};

document.getElementById("deploy").onclick = async ()=>{
  try {
    const name = document.getElementById("tokenName").value.trim();
    const sym = document.getElementById("tokenSymbol").value.trim();
    if(!name || !sym) return alert("Enter token name and symbol");

    const decimals = 9;
    const supply = ethers.parseUnits("1000000", decimals);

    const factory = new ethers.ContractFactory(ABI, BYTECODE, wallet);
    log("Deploying contract…");
    const contract = await factory.deploy(name, sym, decimals, supply);
    log(`TX sent: ${contract.deployTransaction.hash}`);
    await contract.waitForDeployment();
    const addr = await contract.getAddress();
    log(`Deployed at ${addr}`, "ok");
    document.getElementById("status").textContent = `✅ Contract deployed: ${addr}`;
  } catch(e){
    log("Error: "+e.message, "err");
    document.getElementById("status").textContent = "❌ " + e.message;
  }
};
</script>
</body>
</html>
